Index: app/src/main/java/alexandrostselios/tichucounter/FileManager.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package alexandrostselios.tichucounter;\r\n\r\nimport android.app.Activity;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.os.Build;\r\nimport android.os.Environment;\r\nimport android.support.annotation.RequiresApi;\r\n\r\nimport java.io.File;\r\nimport java.io.FileInputStream;\r\nimport java.io.FileOutputStream;\r\nimport java.io.IOException;\r\nimport java.io.OutputStreamWriter;\r\n\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.view.Window;\r\n\r\nimport java.util.Date;\r\nimport java.util.Locale;\r\n\r\nimport java.text.SimpleDateFormat;\r\n\r\nimport android.app.ProgressDialog;\r\nimport android.widget.ProgressBar;\r\n\r\nimport static android.os.Environment.DIRECTORY_DOCUMENTS;\r\n\r\npublic class FileManager extends Activity {\r\n\r\n    private Intent intent;\r\n    private Context context;\r\n    private File file;\r\n    private FileInputStream fileInputtStream;\r\n    private FileOutputStream fileOutputStream;\r\n    private OutputStreamWriter outputStreamWriter;\r\n    private String currentDate;\r\n    private String[] writeData = new String[200];\r\n    private boolean append;\r\n\r\n    public FileManager(Intent intent, Save context) throws IOException {\r\n        this.intent=intent;\r\n        this.context=context;\r\n    }\r\n\r\n    public FileManager(Intent intent, Load context) throws IOException {\r\n        this.intent=intent;\r\n        this.context=context;\r\n    }\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.KITKAT)\r\n    private void openFile() throws IOException {\r\n        //https://stackoverflow.com/questions/21216943/how-to-access-getfilesdir-as-an-environment-variable\r\n        //https://gist.github.com/lopspower/76421751b21594c69eb2\r\n        file = new File( String.valueOf(Environment.getExternalStoragePublicDirectory(DIRECTORY_DOCUMENTS)),\"/score.txt\");\r\n        if(file.exists()){\r\n            append = true;\r\n        }else{\r\n            append = false;\r\n            file.createNewFile();\r\n        }\r\n    }\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.KITKAT)\r\n    public void saveData() throws IOException {\r\n        openFile();\r\n        saveDataToFile();\r\n    }\r\n\r\n    private void saveDataToFile() throws IOException {\r\n        int line = 1;\r\n        writeData = intent.getStringArrayExtra(\"score\");\r\n        fileOutputStream = new FileOutputStream(file,append);\r\n        outputStreamWriter = new OutputStreamWriter(fileOutputStream);\r\n        outputStreamWriter.write(new SimpleDateFormat(\"dd-MM-yyyy\", Locale.getDefault()).format(new Date())+\"\\n\");\r\n        for(int i=0;i<writeData.length;i=i+2){\r\n            if(writeData[i]!=null){\r\n                outputStreamWriter.write(line +\") \"+writeData[i]+\" \"+writeData[i+1]+\"\\n\");\r\n                line++;\r\n            }\r\n        }\r\n        outputStreamWriter.write(10);\r\n        outputStreamWriter.close();\r\n    }\r\n\r\n    @RequiresApi(api = Build.VERSION_CODES.KITKAT)\r\n    public void readData() throws IOException {\r\n        openFile();\r\n    }\r\n\r\n    private void readDataFromFile() throws IOException {\r\n        fileInputtStream = new FileInputStream(file);\r\n        fileInputtStream.read();\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/alexandrostselios/tichucounter/FileManager.java	(revision b4ae74f444b95dedb2be02c64f6444b3c57997ff)
+++ app/src/main/java/alexandrostselios/tichucounter/FileManager.java	(date 1621366693192)
@@ -8,7 +8,6 @@
 import android.support.annotation.RequiresApi;
 
 import java.io.File;
-import java.io.FileInputStream;
 import java.io.FileOutputStream;
 import java.io.IOException;
 import java.io.OutputStreamWriter;
@@ -32,21 +31,30 @@
     private Intent intent;
     private Context context;
     private File file;
-    private FileInputStream fileInputtStream;
     private FileOutputStream fileOutputStream;
     private OutputStreamWriter outputStreamWriter;
     private String currentDate;
     private String[] writeData = new String[200];
-    private boolean append;
+
+
 
     public FileManager(Intent intent, Save context) throws IOException {
         this.intent=intent;
         this.context=context;
     }
 
-    public FileManager(Intent intent, Load context) throws IOException {
-        this.intent=intent;
-        this.context=context;
+    @RequiresApi(api = Build.VERSION_CODES.KITKAT)
+    public void saveDataToFile() throws IOException {
+
+        currentDate = new SimpleDateFormat("dd-MM-yyyy", Locale.getDefault()).format(new Date());
+        writeData = intent.getStringArrayExtra("score");
+        openFile();
+        writeDataToFile();
+
+    }
+
+    public void readDataFromFile(){
+
     }
 
     @RequiresApi(api = Build.VERSION_CODES.KITKAT)
@@ -54,43 +62,20 @@
         //https://stackoverflow.com/questions/21216943/how-to-access-getfilesdir-as-an-environment-variable
         //https://gist.github.com/lopspower/76421751b21594c69eb2
         file = new File( String.valueOf(Environment.getExternalStoragePublicDirectory(DIRECTORY_DOCUMENTS)),"/score.txt");
-        if(file.exists()){
-            append = true;
-        }else{
-            append = false;
-            file.createNewFile();
-        }
-    }
-
-    @RequiresApi(api = Build.VERSION_CODES.KITKAT)
-    public void saveData() throws IOException {
-        openFile();
-        saveDataToFile();
-    }
-
-    private void saveDataToFile() throws IOException {
-        int line = 1;
-        writeData = intent.getStringArrayExtra("score");
-        fileOutputStream = new FileOutputStream(file,append);
+        file.createNewFile();
+        fileOutputStream = new FileOutputStream(file);
         outputStreamWriter = new OutputStreamWriter(fileOutputStream);
-        outputStreamWriter.write(new SimpleDateFormat("dd-MM-yyyy", Locale.getDefault()).format(new Date())+"\n");
+    }
+
+
+    private void writeDataToFile() throws IOException {
+        outputStreamWriter.write(currentDate+"\n");
         for(int i=0;i<writeData.length;i=i+2){
             if(writeData[i]!=null){
-                outputStreamWriter.write(line +") "+writeData[i]+" "+writeData[i+1]+"\n");
-                line++;
+                outputStreamWriter.write(i+1 +") "+writeData[i]+" "+writeData[i+1]+"\n");
             }
         }
         outputStreamWriter.write(10);
         outputStreamWriter.close();
     }
-
-    @RequiresApi(api = Build.VERSION_CODES.KITKAT)
-    public void readData() throws IOException {
-        openFile();
-    }
-
-    private void readDataFromFile() throws IOException {
-        fileInputtStream = new FileInputStream(file);
-        fileInputtStream.read();
-    }
 }
\ No newline at end of file
Index: app/src/main/java/alexandrostselios/tichucounter/TichuCounter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package alexandrostselios.tichucounter;\r\n\r\nimport android.content.Context;\r\nimport android.util.Log;\r\nimport android.widget.Button;\r\nimport android.widget.CheckBox;\r\nimport android.widget.EditText;\r\nimport android.widget.Toast;\r\n\r\npublic class TichuCounter {\r\n    private int score1=0;\r\n    private int score2=0;\r\n    private int error=0;\r\n    private boolean win = false;\r\n\r\n    private EditText currentScore1;\r\n    private EditText currentScore2;\r\n\r\n    Context context;\r\n\r\n    public TichuCounter(Context mainActivity){\r\n        this.context=mainActivity;\r\n        //this.currentScore1=currentScore1;\r\n        //this.currentScore2=currentScore2;\r\n    }\r\n\r\n    public void checkScore(EditText currentScore1, EditText currentScore2){\r\n        if(currentScore1!=null && currentScore2!=null) {\r\n            int counter = 0;\r\n            if (!currentScore1.getText().toString().equals(\"\")) {\r\n                if (currentScore1.isFocused()) {\r\n                    if ((Integer.parseInt(currentScore1.getText().toString()) % 5) != 0 && (Integer.parseInt(currentScore1.getText().toString()) % 5) != 5) {\r\n                        Toast.makeText(context, \"Score of team 1 is WRONG\", Toast.LENGTH_SHORT).show();\r\n                        return;\r\n                    }\r\n                    if ((Integer.parseInt(currentScore1.getText().toString()) > 125) || (Integer.parseInt(currentScore1.getText().toString()) < -25)) {\r\n                        Toast.makeText(context, \"Score of team 1 is WRONG\", Toast.LENGTH_SHORT).show();\r\n                        return;\r\n                    }\r\n                }\r\n                currentScore2.setText(String.valueOf(100 - Integer.parseInt(currentScore1.getText().toString())));\r\n                counter++;\r\n            }\r\n            if (!currentScore2.getText().toString().equals(\"\")) {\r\n                if (currentScore2.isFocused()) {\r\n                    if ((Integer.parseInt(currentScore2.getText().toString()) % 5) != 0 && (Integer.parseInt(currentScore2.getText().toString()) % 5) != 5) {\r\n                        Toast.makeText(context, \"Score of team 2 is WRONG\", Toast.LENGTH_SHORT).show();\r\n                        return;\r\n                    }\r\n                    if ((Integer.parseInt(currentScore2.getText().toString()) > 125) || (Integer.parseInt(currentScore2.getText().toString()) < -25)) {\r\n                        Toast.makeText(context, \"Score of team 2 is WRONG\", Toast.LENGTH_SHORT).show();\r\n                        return;\r\n                    }\r\n                }\r\n                currentScore1.setText(String.valueOf(100 - Integer.parseInt(currentScore2.getText().toString())));\r\n                counter++;\r\n            }\r\n            if (counter >= 1) {\r\n                if (Integer.parseInt(currentScore1.getText().toString()) + Integer.parseInt(currentScore2.getText().toString()) <= 100) {\r\n                    score1 += Integer.parseInt(currentScore1.getText().toString());\r\n                    score2 += Integer.parseInt(currentScore2.getText().toString());\r\n                } else {\r\n                    Toast.makeText(context, \"Score Above 100 points\", Toast.LENGTH_SHORT).show();\r\n                }\r\n            } else {\r\n                Toast.makeText(context, \"Please give points\", Toast.LENGTH_SHORT).show();\r\n            }\r\n            checkWinner();\r\n        }\r\n        error=1;\r\n        setScoreTeam1(score1);\r\n        setScoreTeam2(score2);\r\n        //Log.d(null, \"currentScore1: \"+getScoreTeam1());\r\n        //Log.d(null, \"currentScore2: \"+getScoreTeam2());\r\n    }\r\n\r\n    private void setScoreTeam1(int score1){\r\n        this.score1=score1;\r\n    }\r\n\r\n    private void setScoreTeam2(int score2){\r\n        this.score2=score2;\r\n    }\r\n\r\n    public int getScoreTeam1(){\r\n        return score1;\r\n    }\r\n\r\n    public int getScoreTeam2(){\r\n        return score2;\r\n    }\r\n\r\n    public boolean isWinner(){\r\n        if(win){\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    private void checkWinner(){\r\n        if(score1>=1000 && score2<1000){\r\n            win = true;\r\n            Toast.makeText(context, \"Team 1 won the game\", Toast.LENGTH_SHORT).show();\r\n        }else if(score2>=1000 && score1<1000){\r\n            win = true;\r\n            Toast.makeText(context, \"Team 2 won the game\", Toast.LENGTH_SHORT).show();\r\n        }else if(score1>=1000 && score2>=1000){\r\n            if(score1>score2){\r\n                Toast.makeText(context, \"Team 1 won the game\", Toast.LENGTH_SHORT).show();\r\n            }else{\r\n                Toast.makeText(context, \"Team 2 won the game\", Toast.LENGTH_SHORT).show();\r\n            }\r\n            win = true;\r\n        }\r\n    }\r\n\r\n    public boolean checkTichuStatus(int teamTichu1, CheckBox tichuCheck1, Button grandTichu1, int teamGrandTichu1, CheckBox grandTichuCheck1, int teamTichu2, CheckBox tichuCheck2, Button grandTichu2, int teamGrandTichu2, CheckBox grandTichuCheck2, EditText currentScore1, EditText currentScore2){\r\n        if(error==1) {\r\n            error=0;\r\n            if(!currentScore1.getText().toString().equals(\"\") && !currentScore1.getText().toString().equals(\"\")) {\r\n                if ((teamTichu1 == 1 && teamGrandTichu1 == 1 && tichuCheck1.isChecked() && grandTichuCheck1.isChecked())\r\n                        || (teamTichu1 == 1 && teamTichu2 == 1 && tichuCheck1.isChecked() && tichuCheck2.isChecked())\r\n                        || (teamTichu1 == 1 && teamGrandTichu2 == 1 && tichuCheck1.isChecked() && grandTichuCheck2.isChecked())\r\n                        || (teamTichu2 == 1 && teamGrandTichu2 == 1 && tichuCheck2.isChecked() && grandTichuCheck2.isChecked())\r\n                        || (teamGrandTichu1 == 1 && teamTichu2 == 1 && grandTichuCheck1.isChecked() && tichuCheck2.isChecked())\r\n                        || (teamGrandTichu1 == 1 && teamGrandTichu2 == 1 && grandTichuCheck1.isChecked() && grandTichuCheck2.isChecked())) {\r\n\r\n                    Toast.makeText(context.getApplicationContext(), \"Check Tichu/Grand\", Toast.LENGTH_SHORT).show();\r\n                    return false;\r\n                }\r\n                if (teamTichu1 == 1 && tichuCheck1.isChecked()) {\r\n                    //Log.d(\"null\", \"Team 1 TICHU\");\r\n                    score1 += 100;\r\n                } else if (teamTichu1 == 1 && !tichuCheck1.isChecked()) {\r\n                    score1 -= 100;\r\n                }\r\n                if (teamGrandTichu1 == 1 && grandTichuCheck1.isChecked()) {\r\n                    //Log.d(\"null\", \"Team 1 GRAND TICHU\");\r\n                    score1 += 200;\r\n                } else if (teamGrandTichu1 == 1 && !grandTichuCheck1.isChecked()) {\r\n                    score1 -= 200;\r\n                }\r\n                if (teamTichu2 == 1 && tichuCheck2.isChecked()) {\r\n                    score2 += 100;\r\n                } else if (teamTichu2 == 1 && !tichuCheck2.isChecked()) {\r\n                    score2 -= 100;\r\n                }\r\n                if (teamGrandTichu2 == 1 && grandTichuCheck2.isChecked()) {\r\n                    score2 += 200;\r\n                } else if (teamGrandTichu2 == 1 && !grandTichuCheck2.isChecked()) {\r\n                    score2 -= 200;\r\n                }\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n        return false;\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/alexandrostselios/tichucounter/TichuCounter.java	(revision b4ae74f444b95dedb2be02c64f6444b3c57997ff)
+++ app/src/main/java/alexandrostselios/tichucounter/TichuCounter.java	(date 1621366693286)
@@ -20,8 +20,6 @@
 
     public TichuCounter(Context mainActivity){
         this.context=mainActivity;
-        //this.currentScore1=currentScore1;
-        //this.currentScore2=currentScore2;
     }
 
     public void checkScore(EditText currentScore1, EditText currentScore2){
@@ -70,8 +68,6 @@
         error=1;
         setScoreTeam1(score1);
         setScoreTeam2(score2);
-        //Log.d(null, "currentScore1: "+getScoreTeam1());
-        //Log.d(null, "currentScore2: "+getScoreTeam2());
     }
 
     private void setScoreTeam1(int score1){
